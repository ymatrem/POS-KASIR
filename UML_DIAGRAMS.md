# ğŸ“Š UML DIAGRAMS - POS KASIR PROJECT

## 1ï¸âƒ£ CLASS DIAGRAM

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        CashierController             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - menus: Menu[]                      â”‚
â”‚ - categories: Category[]             â”‚
â”‚ - cart: array (session)              â”‚
â”‚ - order: Order                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + index(): View                      â”‚
â”‚ + addToCart(Request): JsonResponse   â”‚
â”‚ + updateCart(Request, menuId): Json  â”‚
â”‚ + removeFromCart(menuId): Json       â”‚
â”‚ + getCart(): JsonResponse            â”‚
â”‚ + checkout(Request): JsonResponse    â”‚
â”‚ + clearCart(): JsonResponse          â”‚
â”‚ + printReceipt(orderId): View        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
      â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚    â”‚            â”‚             â”‚
      â†“    â†“            â†“             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Menu   â”‚   â”‚ Order    â”‚   â”‚OrderItemâ”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚-id     â”‚   â”‚-id       â”‚   â”‚-id      â”‚
    â”‚-name   â”‚   â”‚-order_nb â”‚   â”‚-order_idâ”‚
    â”‚-price  â”‚   â”‚-total_amtâ”‚   â”‚-menu_id â”‚
    â”‚-stock  â”‚   â”‚-total_qtyâ”‚   â”‚-qty     â”‚
    â”‚-sold_qty   â”‚-payment  â”‚   â”‚-price   â”‚
    â”‚-image_url  â”‚-status   â”‚   â”‚-discountâ”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚-created  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚+hasEnough()    â”‚-completed  â”‚
    â”‚+decreaseStock()â”‚-timestamps â”‚
    â”‚+increaseStock()â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Category â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚-id       â”‚
    â”‚-name     â”‚
    â”‚-created  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RELATIONSHIPS:
- Menu         belongsTo  Category       (1:N)
- Order        hasMany    OrderItem      (1:N)
- OrderItem    belongsTo  Order          (N:1)
- OrderItem    belongsTo  Menu           (N:1)
```

---

## 2ï¸âƒ£ SEQUENCE DIAGRAM - addToCart()

```
User         Browser         CashierController    Menu      Session
 â”‚              â”‚                    â”‚             â”‚           â”‚
 â”œâ”€ Click Addâ”€â”€>â”‚                    â”‚             â”‚           â”‚
 â”‚              â”œâ”€POST /add-to-cartâ”€>â”‚             â”‚           â”‚
 â”‚              â”‚                    â”‚             â”‚           â”‚
 â”‚              â”‚         â”Œâ”€â”€Validate Request      â”‚           â”‚
 â”‚              â”‚         â”‚          â”‚             â”‚           â”‚
 â”‚              â”‚         â”œâ”€Find Menuâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚           â”‚
 â”‚              â”‚         â”‚          â”‚<â”€Menu dataâ”€â”¤           â”‚
 â”‚              â”‚         â”‚          â”‚             â”‚           â”‚
 â”‚              â”‚         â”œâ”€hasEnoughStock()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  â”‚
 â”‚              â”‚         â”‚          â”‚<â”€true/falseâ”¤           â”‚
 â”‚              â”‚         â”‚          â”‚             â”‚           â”‚
 â”‚              â”‚         â”‚  If Stok Kurang â”‚
 â”‚              â”‚<â”€Error 422 JSONâ”€â”€â”¤             â”‚           â”‚
 â”‚              â”‚ "Stok tidak cukup"â”‚            â”‚           â”‚
 â”‚              â”‚                    â”‚             â”‚           â”‚
 â”‚              â”‚    If Stok Cukup   â”‚            â”‚           â”‚
 â”‚              â”‚         â”œâ”€â”€Get Cartâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚              â”‚         â”‚          â”‚             â”‚<â”€cartâ”€â”€â”¤
 â”‚              â”‚         â”‚          â”‚             â”‚           â”‚
 â”‚              â”‚         â”œâ”€Check if item in cart â”‚           â”‚
 â”‚              â”‚         â”‚          â”‚             â”‚           â”‚
 â”‚              â”‚         â”œâ”€Add/Update to cartâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚              â”‚         â”‚          â”‚             â”‚<â”€savedâ”€â”¤
 â”‚              â”‚         â”‚          â”‚             â”‚           â”‚
 â”‚              â”‚<â”€Success JSONâ”€â”€â”€â”€â”€â”¤             â”‚           â”‚
 â”‚              â”‚ {message, cart, count}          â”‚           â”‚
 â”‚<â”€Show successâ”¤                    â”‚             â”‚           â”‚
 â”‚              â”‚                    â”‚             â”‚           â”‚
```

---

## 3ï¸âƒ£ SEQUENCE DIAGRAM - checkout()

```
Cashier      Browser        Controller      Menu        Order       OrderItem    Session
 â”‚              â”‚                â”‚           â”‚            â”‚             â”‚          â”‚
 â”œâ”€Clickâ”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚           â”‚            â”‚             â”‚          â”‚
 â”‚ Checkout     â”œâ”€POST /checkoutâ”‚           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚                â”‚           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚        â”Œâ”€Validate input    â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚        â”‚       â”‚           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚        â”œâ”€Get cartâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚              â”‚        â”‚       â”‚           â”‚            â”‚             â”‚<â”€cartâ”€â”€â”¤
 â”‚              â”‚        â”‚       â”‚           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚        â”œâ”€FOR EACH item     â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚        â”‚  â”œâ”€Check Stockâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚             â”‚
 â”‚              â”‚        â”‚  â”‚    â”‚<â”€OK/FAILâ”€â”¤            â”‚             â”‚          â”‚
 â”‚              â”‚        â”‚       â”‚           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚    â”Œâ”€If Stok Fail         â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚<â”€â”€â”€Error 422â”€â”€â”¤           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚    â”‚           â”‚           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚    â””â”€If All OK  â”‚           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚        â”œâ”€Calculate totals  â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚        â”‚       â”‚           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚        â”œâ”€Create Orderâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚             â”‚
 â”‚              â”‚        â”‚       â”‚           â”‚            â”‚<â”€savedâ”€â”¤             â”‚
 â”‚              â”‚        â”‚       â”‚           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚        â”œâ”€FOR EACH item     â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚        â”‚  â”œâ”€Create OrderItemâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚           â”‚
 â”‚              â”‚        â”‚  â”‚    â”‚           â”‚            â”‚             â”‚<â”€savedâ”€â”¤
 â”‚              â”‚        â”‚  â”œâ”€Increment soldâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚             â”‚
 â”‚              â”‚        â”‚  â””â”€Decrease stockâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚             â”‚
 â”‚              â”‚        â”‚       â”‚           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚        â”œâ”€Clear cartâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚              â”‚        â”‚       â”‚           â”‚            â”‚             â”‚<â”€clearedâ”¤
 â”‚              â”‚        â”‚       â”‚           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚<â”€Success JSONâ”€â”¤           â”‚            â”‚             â”‚          â”‚
 â”‚<â”€Show receiptâ”¤                â”‚           â”‚            â”‚             â”‚          â”‚
 â”‚              â”‚                â”‚           â”‚            â”‚             â”‚          â”‚
```

---

## 4ï¸âƒ£ STATE DIAGRAM - Cart & Order States

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  INITIAL STATE  â”‚
                    â”‚  Empty Cart     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ addToCart()
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ CART WITH ITEMS  â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚  â”‚ Item 1: 5  â”‚  â”‚
                    â”‚  â”‚ Item 2: 3  â”‚  â”‚
                    â”‚  â”‚ Total: 80K â”‚  â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
                    â”‚            â”‚
    addToCart()     â”‚            â”‚ checkout()
    updateCart()    â”‚            â”‚
    removeFromCart()            â”‚
                    â”‚            â†“
                    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    â”‚ ORDER CREATED    â”‚
                    â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                    â”‚    â”‚ â”‚ Order#     â”‚   â”‚
                    â”‚    â”‚ â”‚ Inv-xxxx   â”‚   â”‚
                    â”‚    â”‚ â”‚ Total: 80K â”‚   â”‚
                    â”‚    â”‚ â”‚ Status: OK â”‚   â”‚
                    â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚             â”‚
                    â”‚             â”‚ printReceipt()
                    â”‚             â†“
                    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    â”‚ RECEIPT PRINTED  â”‚
                    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                              â”‚ clearCart()
                              â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ CART EMPTY AGAIN â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5ï¸âƒ£ ACTIVITY DIAGRAM - Checkout Process

```
                         START
                          â”‚
                          â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ User Clicks  â”‚
                    â”‚  Checkout    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”Œâ”€â”€â”€â”€>â”‚ Cart Empty?  â”‚â—„â”€â”€â”€â”€â”
              â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
             YES           NO             â”‚
              â”‚             â”‚             â”‚
              â†“             â†“             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
         â”‚ Error:  â”‚ â”‚ Validate        â”‚ â”‚
         â”‚ "Empty" â”‚ â”‚ Payment Method  â”‚ â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
              â”‚               â”‚          â”‚
              â”‚               â†“          â”‚
              â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚        â”‚ FOR EACH Item:  â”‚
              â”‚        â”‚ Check Stock?    â”‚
              â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                 â”‚
              â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚        â”‚               â”‚
              â”‚       NO              YES
              â”‚        â”‚               â”‚
              â†“        â†“               â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
         â”‚ Error:   â”‚                 â”‚
         â”‚ "Stok â”€< â”‚                 â”‚
         â”‚ Kurang"  â”‚                 â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚
              â”‚                       â†“
              â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚        â”‚ Calculate Total      â”‚
              â”‚        â”‚ - Subtotal           â”‚
              â”‚        â”‚ - Discount           â”‚
              â”‚        â”‚ - Final Amount       â”‚
              â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                   â”‚
              â”‚                   â†“
              â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚        â”‚ Create Order (DB)    â”‚
              â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                   â”‚
              â”‚                   â†“
              â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚        â”‚ FOR EACH Item:       â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€>â”‚ - Create OrderItem   â”‚
              â”‚        â”‚ - Update sold_qty    â”‚
              â”‚        â”‚ - Decrease stock     â”‚
              â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                   â”‚
              â”‚                   â†“
              â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚        â”‚ Clear Cart Session   â”‚
              â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚       â”‚
                                  â†“       â†“
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ Return JSON      â”‚
                           â”‚ Success Response â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ Show Receipt     â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
                                  END
```

---

## 6ï¸âƒ£ DATA FLOW DIAGRAM (Level 0)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cashier  â”‚                                    â”‚   Database   â”‚
â”‚ Interface â”‚                                    â”‚   (MySQL)    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                                 â”‚
      â”‚ 1. Menu List                                   â”‚
      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
      â”‚                                                 â”‚
      â”‚                  2. All Menus + Stock           â”‚
      â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
      â”‚                                                 â”‚
      â”‚ 3. Add to Cart (menu_id, qty)                  â”‚
      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
      â”‚                                                 â”‚
      â”‚                  4. Verify Stock OK             â”‚
      â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
      â”‚                                                 â”‚
      â”‚ 5. Update Cart                                 â”‚
      â”‚ (Session stored locally)                       â”‚
      â”‚                                                 â”‚
      â”‚ 6. Checkout (cart, payment, discount)          â”‚
      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
      â”‚                                                 â”‚
      â”‚       7. CREATE Order                          â”‚
      â”‚       8. CREATE OrderItems (multiple)          â”‚
      â”‚       9. UPDATE Menu.sold_quantity             â”‚
      â”‚       10. UPDATE Menu.stock (decrease)         â”‚
      â”‚                                                 â”‚
      â”‚                  11. Order Created              â”‚
      â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
      â”‚                                                 â”‚
      â”‚ 12. Print Receipt (orderId)                    â”‚
      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
      â”‚                                                 â”‚
      â”‚                  13. Order Details              â”‚
      â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
      â”‚                                                 â”‚
```

---

## 7ï¸âƒ£ USE CASE DIAGRAM

```
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚ Cashier  â”‚
                                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                  â”‚                  â”‚
                    â†“                  â†“                  â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ View Menus â”‚   â”‚ Filter by  â”‚   â”‚ View Menu      â”‚
            â”‚            â”‚   â”‚ Category   â”‚   â”‚ Details        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                  â”‚                  â”‚
                    â”‚                  â”‚                  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                      â”‚
                        â†“                      â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Add to Cart  â”‚      â”‚ Update Cart    â”‚
                â”‚ (quantity)   â”‚      â”‚ (change qty)   â”‚
                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                      â”‚
                    â”‚  Stock Validation    â”‚
                    â”œâ”€ Check if sufficient â”¤
                    â”‚  Error if < qty      â”‚
                    â”‚                      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                   â”‚
                        â†“                   â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚Remove from   â”‚   â”‚View Cart Total   â”‚
                â”‚Cart          â”‚   â”‚                  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                   â”‚
                        â”‚                   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Checkout           â”‚
                        â”‚ - Select Payment   â”‚
                        â”‚ - Enter Discount   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Final Stock Validation â”‚
                        â”‚ FOR EACH item          â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                   â”‚
                    YES                 NO
                        â”‚                   â”‚
                        â†“                   â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Create Order  â”‚   â”‚ Show Error  â”‚
                â”‚ + OrderItems  â”‚   â”‚ "Stok â”€"   â”‚
                â”‚ Decrease Stockâ”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Print Receipt     â”‚
                â”‚ Clear Cart        â”‚
                â”‚ Close Transaction â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    ```

---

## 8ï¸âƒ£ COMPONENT DIAGRAM

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   POS KASIR APPLICATION                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            PRESENTATION LAYER                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚Cashier View â”‚  â”‚Cart Display  â”‚  â”‚Receipt Template â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚                 â”‚                  â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚            APPLICATION LOGIC LAYER                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚         CashierController                           â”‚ â”‚â”‚
â”‚  â”‚  â”‚ - addToCart()                                       â”‚ â”‚â”‚
â”‚  â”‚  â”‚ - updateCart()                                      â”‚ â”‚â”‚
â”‚  â”‚  â”‚ - removeFromCart()                                  â”‚ â”‚â”‚
â”‚  â”‚  â”‚ - checkout()                                        â”‚ â”‚â”‚
â”‚  â”‚  â”‚ - getCart()                                         â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â”‚                 â”‚                  â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              BUSINESS LOGIC LAYER                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚â”‚
â”‚  â”‚  â”‚Menu Model    â”‚  â”‚Order      â”‚  â”‚OrderItem     â”‚        â”‚â”‚
â”‚  â”‚  â”‚- validate    â”‚  â”‚- validate â”‚  â”‚- calculate   â”‚        â”‚â”‚
â”‚  â”‚  â”‚- hasEnough   â”‚  â”‚- create   â”‚  â”‚- calculate   â”‚        â”‚â”‚
â”‚  â”‚  â”‚- decrease    â”‚  â”‚- update   â”‚  â”‚  discount    â”‚        â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â”‚                 â”‚                  â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              DATA ACCESS LAYER                            â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚        Eloquent ORM (Laravel)                        â”‚ â”‚â”‚
â”‚  â”‚  â”‚  - Query Builder                                    â”‚ â”‚â”‚
â”‚  â”‚  â”‚  - Model Relations                                  â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â”‚                 â”‚                  â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚             DATABASE LAYER                               â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚       MySQL Database                                â”‚ â”‚â”‚
â”‚  â”‚  â”‚  Tables: menus, orders, order_items, categories    â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

External:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Session Storage      â”‚
â”‚ (cashier_cart)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9ï¸âƒ£ CONDITIONAL LOGIC FLOWCHART - addToCart()

```
START: addToCart(Request $request)
â”‚
â”œâ”€ Validate Request
â”‚  â”œâ”€ menu_id required & exists?
â”‚  â”‚  â”œâ”€ NO â†’ return error
â”‚  â”‚  â””â”€ YES â†’ continue
â”‚  â””â”€ quantity required & integer & min:1?
â”‚     â”œâ”€ NO â†’ return error
â”‚     â””â”€ YES â†’ continue
â”‚
â”œâ”€ Get Menu from database
â”‚  â”œâ”€ Not found?
â”‚  â”‚  â””â”€ NO â†’ throw 404
â”‚  â””â”€ Found â†’ continue
â”‚
â”œâ”€ Check: $menu->hasEnoughStock($quantity)?
â”‚  â”œâ”€ NO â†’ âŒ return error 422
â”‚  â”‚       "Stok {$menu->name} tidak cukup"
â”‚  â”‚       "Tersedia: {$menu->stock}"
â”‚  â””â”€ YES â†’ continue
â”‚
â”œâ”€ Get cart from session
â”‚  â””â”€ If empty â†’ initialize []
â”‚
â”œâ”€ Check: isset($cart[$menu->id])?
â”‚  â”‚
â”‚  â”œâ”€ YES (Item already in cart)
â”‚  â”‚  â”œâ”€ Calculate: $newQty = $cart[$menu->id]['qty'] + $request->qty
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ Check: $menu->hasEnoughStock($newQty)?
â”‚  â”‚  â”‚  â”œâ”€ NO â†’ âŒ return error 422
â”‚  â”‚  â”‚  â”‚       "Stok tidak cukup untuk total qty: {$newQty}"
â”‚  â”‚  â”‚  â””â”€ YES â†’ Update: $cart[$menu->id]['qty'] = $newQty
â”‚  â”‚  â”‚           continue
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ Save to session
â”‚  â”‚
â”‚  â””â”€ NO (First time adding)
â”‚     â”œâ”€ Create new item array:
â”‚     â”‚  $cart[$menu->id] = [
â”‚     â”‚    'id' => $menu->id,
â”‚     â”‚    'name' => $menu->name,
â”‚     â”‚    'price' => $menu->price,
â”‚     â”‚    'quantity' => $request->quantity,
â”‚     â”‚    'image_url' => $menu->image_url,
â”‚     â”‚    'category' => $menu->category->name
â”‚     â”‚  ]
â”‚     â””â”€ Save to session
â”‚
â”œâ”€ Return success JSON:
â”‚  {
â”‚    "success": true,
â”‚    "message": "{$menu->name} ditambahkan ke keranjang",
â”‚    "cart": {...},
â”‚    "cart_count": count($cart)
â”‚  }
â”‚
â””â”€ END

HTTP Status Codes:
- 200: Success
- 422: Validation error / Stock insufficient
- 404: Menu not found
- 500: Server error
```

---

## ğŸ”Ÿ CONDITIONAL LOGIC FLOWCHART - checkout()

```
START: checkout(Request $request)
â”‚
â”œâ”€ Validate Request
â”‚  â”œâ”€ payment_method in [cash, credit_card, qris]?
â”‚  â”‚  â””â”€ NO â†’ return error 422
â”‚  â””â”€ discount numeric 0-100?
â”‚     â””â”€ NO â†’ return error 422
â”‚
â”œâ”€ Get cart from session
â”‚
â”œâ”€ Check: empty($cart)?
â”‚  â”œâ”€ YES â†’ âŒ return error 400
â”‚  â”‚       "Keranjang kosong"
â”‚  â””â”€ NO â†’ continue
â”‚
â”œâ”€ âœ… Try Block Start:
â”‚  â”‚
â”‚  â”œâ”€ FOR EACH item in $cart:
â”‚  â”‚  â”œâ”€ Get Menu from DB
â”‚  â”‚  â”œâ”€ Check: $menu->hasEnoughStock($item['qty'])?
â”‚  â”‚  â”‚  â”œâ”€ NO â†’ âŒ return error 422
â”‚  â”‚  â”‚  â”‚       "Stok {$menu->name} tidak cukup"
â”‚  â”‚  â”‚  â”‚       "Tersedia: {$menu->stock}"
â”‚  â”‚  â”‚  â””â”€ YES â†’ continue next item
â”‚  â”‚  â””â”€ End loop
â”‚  â”‚
â”‚  â”œâ”€ All items OK âœ“ â†’ Calculate totals:
â”‚  â”‚
â”‚  â”œâ”€ Initialize variables:
â”‚  â”‚  â”œâ”€ $totalAmount = 0
â”‚  â”‚  â”œâ”€ $totalQuantity = 0
â”‚  â”‚  â””â”€ $discountPercentage = $request->discount ?? 0
â”‚  â”‚
â”‚  â”œâ”€ Loop 1 - Calculate subtotal:
â”‚  â”‚  FOR EACH item in $cart:
â”‚  â”‚    â”œâ”€ $itemTotal = item['price'] Ã— item['qty']
â”‚  â”‚    â”œâ”€ $totalAmount += $itemTotal
â”‚  â”‚    â””â”€ $totalQuantity += item['qty']
â”‚  â”‚
â”‚  â”œâ”€ Calculate discount:
â”‚  â”‚  â”œâ”€ $discountAmount = ($totalAmount Ã— $discountPercentage) / 100
â”‚  â”‚  â””â”€ $finalAmount = $totalAmount - $discountAmount
â”‚  â”‚
â”‚  â”œâ”€ Create Order in DB:
â”‚  â”‚  Order::create([
â”‚  â”‚    'order_number' => 'INV-' . Str::random(8) . '-' . now(),
â”‚  â”‚    'total_amount' => $finalAmount,
â”‚  â”‚    'total_quantity' => $totalQuantity,
â”‚  â”‚    'payment_method' => $request->payment_method,
â”‚  â”‚    'status' => 'completed',
â”‚  â”‚    'completed_at' => now()
â”‚  â”‚  ])
â”‚  â”‚
â”‚  â”œâ”€ Loop 2 - Create OrderItems & Update Stock:
â”‚  â”‚  FOR EACH item in $cart:
â”‚  â”‚    â”‚
â”‚  â”‚    â”œâ”€ $discountPerItem =
â”‚  â”‚    â”‚   (item['price'] Ã— item['qty'] Ã— $discountPercentage) / 100
â”‚  â”‚    â”‚
â”‚  â”‚    â”œâ”€ Create OrderItem:
â”‚  â”‚    â”‚  OrderItem::create([
â”‚  â”‚    â”‚    'order_id' => $order->id,
â”‚  â”‚    â”‚    'menu_id' => item['id'],
â”‚  â”‚    â”‚    'quantity' => item['qty'],
â”‚  â”‚    â”‚    'price' => item['price'],
â”‚  â”‚    â”‚    'discount' => $discountPerItem
â”‚  â”‚    â”‚  ])
â”‚  â”‚    â”‚
â”‚  â”‚    â”œâ”€ Update Menu sold_quantity:
â”‚  â”‚    â”‚  Menu::find(item['id'])
â”‚  â”‚    â”‚      ->increment('sold_quantity', item['qty'])
â”‚  â”‚    â”‚
â”‚  â”‚    â””â”€ Decrease Menu stock:
â”‚  â”‚       Menu::find(item['id'])
â”‚  â”‚           ->decreaseStock(item['qty'])
â”‚  â”‚       // stock -= quantity; save()
â”‚  â”‚
â”‚  â”œâ”€ Clear cart from session:
â”‚  â”‚  session()->forget('cashier_cart')
â”‚  â”‚
â”‚  â””â”€ Return success JSON:
â”‚     {
â”‚       "success": true,
â”‚       "message": "Checkout berhasil!",
â”‚       "order": {...},
â”‚       "order_number": "INV-..."
â”‚     }
â”‚
â”œâ”€ âŒ Catch Exception:
â”‚  â””â”€ Return error 500 JSON:
â”‚     {
â”‚       "success": false,
â”‚       "message": "Checkout gagal: " . exception->getMessage()
â”‚     }
â”‚
â””â”€ END

HTTP Status Codes:
- 200: Success
- 400: Cart empty
- 422: Validation error / Stock insufficient
- 500: Server error
```

---

## ğŸ“Š METHOD CALL MATRIX

| Method               | Called By    | Calls               | HTTP            | Parameters        | Returns |
| -------------------- | ------------ | ------------------- | --------------- | ----------------- | ------- |
| **index()**          | GET /cashier | Menu::with()        | 200             | -                 | View    |
| **addToCart()**      | POST         | Menu::findOrFail()  | 200/422         | menu_id, qty      | JSON    |
| **updateCart()**     | PUT          | session()->get()    | 200/404         | menuId, qty       | JSON    |
| **removeFromCart()** | DELETE       | session()->get()    | 200/404         | menuId            | JSON    |
| **getCart()**        | GET          | session()->get()    | 200             | -                 | JSON    |
| **checkout()**       | POST         | Order::create()     | 200/400/422/500 | payment, discount | JSON    |
| **clearCart()**      | DELETE       | session()->forget() | 200             | -                 | JSON    |
| **printReceipt()**   | GET          | Order::with()       | 200             | orderId           | View    |

---

## ğŸ”— DATABASE RELATIONSHIPS

```
Categories (1)
    â”‚
    â”œâ”€â”€â”€ (1:N) â”€â”€â†’ Menus
    â”‚                â”‚
    â”‚                â””â”€â”€â”€ (1:N) â”€â”€â†’ OrderItems
    â”‚                                   â”‚
    â”‚                                   â””â”€â”€â”€ (N:1) â”€â”€â†’ Orders
    â”‚
    â””â”€â”€â”€ OrderItems â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ KEY VALIDATIONS & ERROR HANDLING

```
â”Œâ”€ INPUT VALIDATION
â”‚  â”œâ”€ menu_id: required, exists in DB
â”‚  â”œâ”€ quantity: required, integer, min 1
â”‚  â”œâ”€ payment_method: required, in [cash, credit_card, qris]
â”‚  â””â”€ discount: nullable, numeric, 0-100
â”‚
â”œâ”€ BUSINESS VALIDATION
â”‚  â”œâ”€ Stock check: hasEnoughStock()
â”‚  â”œâ”€ Cart not empty for checkout
â”‚  â”œâ”€ All items in cart have sufficient stock
â”‚  â””â”€ Quantity is positive integer
â”‚
â”œâ”€ DATABASE VALIDATION
â”‚  â”œâ”€ Menu exists
â”‚  â”œâ”€ Order created successfully
â”‚  â”œâ”€ OrderItems created successfully
â”‚  â””â”€ Stock decreased correctly
â”‚
â””â”€ ERROR RESPONSES
   â”œâ”€ 200: OK - Success response
   â”œâ”€ 400: Bad Request - Cart empty
   â”œâ”€ 404: Not Found - Item/Menu not found
   â”œâ”€ 422: Unprocessable Entity - Validation error, stock insufficient
   â””â”€ 500: Internal Server Error - Exception during processing
```

---

## ğŸ“ˆ TRANSACTION FLOW SUMMARY

```
User Action          Controller Method    Validation        Database Update
â”œâ”€ View Menu         index()              -                 SELECT menus
â”œâ”€ Add to Cart       addToCart()          âœ“ Stock check     UPDATE session
â”œâ”€ Update Qty        updateCart()         âœ“ Stock check     UPDATE session
â”œâ”€ Remove from Cart  removeFromCart()     -                 UPDATE session
â”œâ”€ View Cart         getCart()            -                 SELECT session
â”œâ”€ Checkout          checkout()           âœ“âœ“ Final check    INSERT order, items
â”‚                                                           UPDATE menus (stock, sold_qty)
â”‚                                                           CLEAR session
â””â”€ Print Receipt     printReceipt()       -                 SELECT order, items
```

---

Generated: 2 Desember 2024
Project: POS Kasir System
Version: 1.0
